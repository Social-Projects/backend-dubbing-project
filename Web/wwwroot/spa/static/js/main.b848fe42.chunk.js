(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){e.exports={actionSection:"ActionSection_actionSection__NMcEX"}},101:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAPCAYAAAAGRPQsAAABHklEQVQ4jY2TYXHDMAyFP/VGwBRCwRQ2CBuEDEIGIYPQQWghNBAaCA2EFsLbj0it57rbdOfzWfZ9fnqWjUZI6oAYAAswm9mldb4JkDRKOuk+zpIOfzHMQQMwFvkLMLuiCUiuMlVKp1pRKhRsJeVqf9dQWireui0/YY2y0wNIC5o3burigOyenYHM7QHK8luRgH7ji9nnDngDPsxs78CIT+ClAH6FiPAxYJHMZjYDe0l9BRuAo6sI4FzsL08NZQAHoFZ2V1aVWxludkSW9Oz56LnTg/67PgDABsDMFvckVGVJqSi/Y/Xr3RVPxfnSplto/QHlc78W60P0k1dS9t/QNMPLjIOjfm/auCQ1YRU4+fwIuPsXqAHuJR193H07gG81FKubwLOaxAAAAABJRU5ErkJggg=="},102:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAOCAYAAAAmL5yKAAAA1UlEQVQokZWSYRHCMAyF3zgMYGEWZqFIGBaQABJmYRaGhFrAwiahSPj4sVeux4CN3PWSe817TdJIfxgw+BzWEmug+4BfmC2ukZMT6wIb7Fvf9WvkUqAxnpzTv+7fCO+WXwyFeHQM0OkHOQtExwHoHB+AOxB3G4Z/sm8lTY4bSQ9J9RaBYD8V2KMc3JYWosuOQDIvAcNe0llSXozGpb6sqqqjCb2ruQKtObdFvcWg5m+asZCn7kpGYPzatBMTxcoy70JuAyB8FTBhse/+OtzC/+ZWmhJ7Akb3fLfVZgKKAAAAAElFTkSuQmCC"},107:function(e,t,n){e.exports=n(193)},116:function(e,t,n){},118:function(e,t,n){},145:function(e,t,n){},147:function(e,t,n){},149:function(e,t,n){},153:function(e,t,n){},155:function(e,t,n){},157:function(e,t,n){},171:function(e,t,n){},173:function(e,t,n){},175:function(e,t,n){},181:function(e,t,n){},185:function(e,t,n){},187:function(e,t,n){},193:function(e,t,n){"use strict";n.r(t);var a,r=n(1),c=n.n(r),i=n(27),o=n.n(i),s=n(20),u=n(196),l=n(29),p=n(65),d=n(66),h=n(8),f=n(9),m=n(12),g=n(10),b=n(11),v=n(199),x=n(160),k=(n(116),n(67)),y=n.n(k),E=(n(118),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"login-form"},c.a.createElement("div",{className:"main-div"},c.a.createElement("div",null,c.a.createElement("h2",null,"\u0412\u0445\u0456\u0434")),c.a.createElement("form",{id:"Login"},c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{type:"email",className:"form-control",id:"inputEmail",placeholder:"\u041b\u043e\u0433\u0456\u043d"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{type:"password",className:"form-control",id:"inputPassword",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"})),c.a.createElement("button",{type:"submit",className:"btn btn-primary"},"\u0412\u0445\u0456\u0434"),c.a.createElement("label",{className:"remember"},c.a.createElement("span",null,"\u0417\u0430\u043f\u0430\u043c'\u044f\u0442\u0430\u0442\u0438"),"\xa0",c.a.createElement("span",null,c.a.createElement("input",{id:"remember-me",name:"remember-me",type:"checkbox"}))),c.a.createElement("div",{id:"register-link",className:"text-right"},c.a.createElement("a",{href:"#",className:"text-info"},"\u0417\u0430\u0431\u0443\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?")))))}}]),t}(c.a.Component)),O=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"MainLogin"},c.a.createElement("img",{className:"logoImg",width:"200px",src:y.a,alt:""}),c.a.createElement(E,null))}}]),t}(c.a.Component),C=n(197),S=n(2),j=n.n(S),w=n(5),A=n(6),I=n(151),N=n(24),T=n.n(N),L=function(){function e(){Object(h.a)(this,e),this.backendUrl="",this.backendUrl=T.a.get("urlApi")}return Object(f.a)(e,[{key:"createPerformance",value:function(){var e=Object(w.a)(j.a.mark(function e(t){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.backendUrl,"api/Performance"),{body:t,headers:{Accept:"application/json","Access-Control-Allow-Origin":"*","Content-Type":"application/json"},method:"POST"}).catch(function(e){return e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updatePerformance",value:function(){var e=Object(w.a)(j.a.mark(function e(t,n){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.backendUrl,"api/Performance/").concat(n),{body:t,headers:{Accept:"application/json","Access-Control-Allow-Origin":"*","Content-Type":"application/json"},method:"PUT"}).catch(function(e){return e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getPerformances",value:function(){var e=Object(w.a)(j.a.mark(function e(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.backendUrl,"api/Performance"),{headers:{Accept:"application/json","Access-Control-Allow-Origin":"*","Content-Type":"application/json"},method:"GET"}).then(function(e){return e}).catch(function(e){return e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getPerformanceById",value:function(){var e=Object(w.a)(j.a.mark(function e(t){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.backendUrl,"api/Performance/").concat(t),{headers:{Accept:"application/json","Access-Control-Allow-Origin":"*","Content-Type":"application/json"},method:"GET"}).catch(function(e){return e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"removePerformance",value:function(){var e=Object(w.a)(j.a.mark(function e(t){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.backendUrl,"api/Performance/").concat(t),{headers:{Accept:"application/json","Access-Control-Allow-Origin":"*","Content-Type":"application/json"},method:"DELETE"}).catch(function(e){return e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getSpeechInfo",value:function(){var e=Object(w.a)(j.a.mark(function e(t){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.backendUrl,"api/performance/").concat(t,"/speeches"),{headers:{Accept:"application/json","Access-Control-Allow-Origin":"*","Content-Type":"application/json"},method:"GET"}).catch(function(e){return e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),_=n(26),P=Object(_.a)({}),D=function(e){return e.children},H=n(48),B=n.n(H),U=function(e){return e.isShow?c.a.createElement(D,null,c.a.createElement("div",{className:B.a.Backdrop}),c.a.createElement("div",{className:B.a.Spinner},"Loading...")):null},F=n(16),M=n(17),R=n(7),G=function(e){return{payload:{currentSpeechId:e},type:"SAVE_CURRENT_SPEECH_ID"}},K=function(e){return{payload:{isPlaying:e},type:"CHANGE_ISPLAYING_STATUS"}},Y=function(e){return{payload:{currentPlaybackTime:e},type:"CHANGE_CURRENT_PLAYBACK_TIME"}},W=function(e){return{type:"CHANGE_CURRENT_TAB_ID",payload:{nextId:e}}},V=n(68),q=n.n(V).a.create({baseURL:"/api/"}),Q=(n(145),function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(m.a)(this,Object(g.a)(t).call(this,e))).onChangeOrderState=function(e){n.setState({order:parseInt(e.target.value,10)})},n.onChange=function(){var e=Object(w.a)(j.a.mark(function e(t){var a,r,c,i,o,s,u;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.files[0],r=parseInt(t.target.id,void 0),c=parseInt(t.target.parentNode.parentNode.id,void 0),!(i=n.props.checkIsOriginalTextEqual(a,c)).isEqual){e.next=13;break}return o="".concat(c,"_").concat(r,".mp3"),s=new File([a],o,{type:a.type}),(u=new FormData).append("File",s),e.next=11,q.post("audio/upload",u,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){n.props.onFileChange(s.name,a.name,r,c)});case 11:e.next=14;break;case 13:alert(i.errorMessage);case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(e){n.props.onTextChange(e.target.value,parseInt(e.target.id,void 0))},n.deleteHandler=function(e){var t=parseInt(e.target.id,void 0);n.props.onDelete(t)},n.handleChange=n.handleChange.bind(Object(A.a)(Object(A.a)(n))),n.deleteHandler=n.deleteHandler.bind(Object(A.a)(Object(A.a)(n))),n.tooltipRemoveToggle=n.tooltipRemoveToggle.bind(Object(A.a)(Object(A.a)(n))),n.state={tooltipRemoveOpen:!1,order:n.props.order},n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"handleUploadClick",value:function(e){e.target.parentElement.parentElement.getElementsByClassName("choose-audio-btn").namedItem(e.target.id.toString()).click()}},{key:"tooltipRemoveToggle",value:function(){this.setState({tooltipRemoveOpen:!this.state.tooltipRemoveOpen})}},{key:"render",value:function(){var e=this,t=Object(M.a)(this.props.languages),n=Object(M.a)(this.props.fileToBeUploadData),a=t.map(function(t,a){return r.createElement("div",{className:"row",key:t.id,id:a.toString()},r.createElement("div",{className:"col-sm-2 vertical-middle"},t.name,":"),r.createElement("input",{key:a,className:"choose-audio-btn",id:t.id.toString(),type:"file",accept:"audio/*",onChange:e.onChange,onClick:function(e){return e.target.value=null}}),r.createElement("button",{id:t.id.toString(),className:"btn-audio-upload",onClick:e.handleUploadClick},"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438"),r.createElement("div",{className:"col-sm-6 vertical-middle"},n.map(function(n){if(n.speechIndex===e.props.id&&n.languageId===t.id)return r.createElement("span",{key:n.speechIndex},n.fileName)})))});return r.createElement("div",{className:"container"},r.createElement("div",{className:"row"},r.createElement("div",{className:"delete-item"},r.createElement("button",{onClick:this.deleteHandler,className:"btn-audio-item-delete",id:"removeButton"+this.props.id},r.createElement("i",{id:this.props.id.toString(),className:"fas fa-times"})),r.createElement(R.n,{placement:"left",isOpen:this.state.tooltipRemoveOpen,autohide:!0,target:"removeButton"+this.props.id,toggle:this.tooltipRemoveToggle},"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0444\u0440\u0430\u0437\u0443 ")),r.createElement("div",{className:"audio-item"},r.createElement("div",{className:"col-sm-12"},r.createElement("div",{className:"spanOrder"},"\u2116 - ",this.props.order),r.createElement("textarea",{id:this.props.id.toString(),onChange:this.handleChange,className:"audio-text",placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043e\u0440\u0438\u0433\u0456\u043d\u0430\u043b \u0442\u0435\u043a\u0441\u0442\u0443 \u0434\u043e \u0430\u0443\u0434\u0456\u043e.",value:this.props.text})),r.createElement("div",{className:"col-sm-8",id:this.props.id.toString()},a.length>0?a:r.createElement("p",{style:{color:"red"}},"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u043c\u043e\u0432\u0443"),r.createElement(R.a,{outline:!0,color:"primary",size:"sm",onClick:function(){e.props.handleChangeOrder(e.state.order,e.props.order)}},"\u0417\u043c\u0456\u0441\u0442\u0438\u0442\u0438 \u0432"),r.createElement("input",{className:"inputOrder",type:"number",pattern:"[0-9]*",onInput:this.onChangeOrderState.bind(this)})))))}}]),t}(r.Component));n(147);!function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE"}(a||(a={}));var z,J=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(m.a)(this,Object(g.a)(t).call(this,e))).child=r.createRef(),n.usedLanguages=[],n.isFirstLanguage=!0,n.onFileChange=function(e,t,a,r){var c=Object(M.a)(n.state.fileToBeUploadData);if(n.state.fileToBeUploadData.length>0)for(var i=0;i<c.length;i++)if(c[i].speechIndex===r&&c[i].languageId===a)return c[i].fileName=e,c[i].isNew=!0,n.props.onAddNewFilesName(e),n.props.isNewFilesLoaded||n.props.onChangeIsNewFilesLoaded(!0),void n.setState({fileToBeUploadData:c});var o={fileName:e,originalText:t,languageId:a,speechIndex:r,isNew:!0};c.push(o),n.setState({fileToBeUploadData:c}),n.props.onAddNewFilesName(o.fileName),n.props.isNewFilesLoaded||n.props.onChangeIsNewFilesLoaded(!0)},n.isSpeechesCorrect=function(){var e=n.state.speeches.length*n.state.languages.filter(function(e){return e.isChoosed}).length,t=Object(M.a)(n.state.languages.filter(function(e){return!0===e.isChoosed}).map(function(e){return e.id}));if(e!==n.state.fileToBeUploadData.filter(function(e){return t.find(function(t){return t===e.languageId})}).length)return{errorCode:-1,errorMessage:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0442\u0435 \u0430\u0443\u0434\u0456\u043e \u0434\u043e \u0432\u0441\u0456\u0445 \u043c\u043e\u0432!"};var a=!1;return n.state.speeches.filter(function(e){void 0!==e.text&&null!==e.text&&""!==e.text||(a=!0)}),a?{errorCode:-2,errorMessage:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0442\u0435\u043a\u0441\u0442 \u0434\u043e \u0432\u0441\u0456\u0445 \u0444\u0440\u0430\u0437!"}:void 0},n.uploadHandler=function(){var e=Object(w.a)(j.a.mark(function e(t,r){var c,i,o,s,u,l;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=null,n.props.onChangeAudioUploadToInitialState(),!r){e.next=15;break}i=j.a.mark(function e(r){var i;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((i={id:n.state.speeches[r].id,text:n.state.speeches[r].text,order:n.state.speeches[r].order,isNew:n.state.speeches[r].isNew,performanceId:t}).isNew){e.next=6;break}return e.next=4,q.put("speech/".concat(i.id),i,{headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}).then(function(){var e=Object(w.a)(j.a.mark(function e(t){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uploadAndSaveAudioAsync(i.id,r,a.PUT).catch(function(e){console.log("[uploadAndSaveAudioAsync]: ".concat(e)),c=e});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){console.log("[uploadHandler] ".concat(e)),c=e});case 4:e.next=8;break;case 6:return e.next=8,q.post("speech",i,{headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}).then(function(){var e=Object(w.a)(j.a.mark(function e(t){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uploadAndSaveAudioAsync(t.data.id,r,a.POST).catch(function(e){console.log("[uploadAndSaveAudioAsync]: ".concat(e)),c=e});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){console.log("[uploadHandler] ".concat(e)),c=e});case 8:if(null===c){e.next=10;break}return e.abrupt("return",{v:{errorCode:-3,errorMessage:c.message}});case 10:case"end":return e.stop()}},e,this)}),o=0;case 5:if(!(o<n.state.speeches.length)){e.next=13;break}return e.delegateYield(i(o),"t0",7);case 7:if("object"!==typeof(s=e.t0)){e.next=10;break}return e.abrupt("return",s.v);case 10:o++,e.next=5;break;case 13:e.next=25;break;case 15:u=j.a.mark(function e(r){var i;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={id:0,text:n.state.speeches[r].text,performanceId:t,order:n.state.speeches[r].order},e.next=3,q.post("speech",i,{headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}).then(function(){var e=Object(w.a)(j.a.mark(function e(t){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uploadAndSaveAudioAsync(t.data.id,r,a.POST).catch(function(e){console.log("[uploadAndSaveAudioAsync]: ".concat(e)),c=e});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){console.log("[uploadHandler] ".concat(e)),c=e});case 3:if(null===c){e.next=5;break}return e.abrupt("return",{v:{errorCode:-3,errorMessage:c.message}});case 5:case"end":return e.stop()}},e,this)}),o=0;case 17:if(!(o<n.state.speeches.length)){e.next=25;break}return e.delegateYield(u(o),"t1",19);case 19:if("object"!==typeof(l=e.t1)){e.next=22;break}return e.abrupt("return",l.v);case 22:o++,e.next=17;break;case 25:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.toggleDropdown=function(){n.setState({dropdownOpen:!n.state.dropdownOpen})},n.toggleSelectedLanguage=function(e){if(void 0===n.state.selectedLanguage||n.state.selectedLanguage.id!==e){var t=n.state.languages.find(function(t){return t.id===e});n.setState({selectedLanguage:t})}},n.tooltipUploadBatchOpen=function(){n.setState({tooltipUploadBatch:!n.state.tooltipUploadBatch})},n.onBatchUpload=function(e){if(e.preventDefault(),void 0!==n.state.selectedLanguage){var t=document.querySelector("#batchUpload");null!==t&&t.click()}else alert("\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430 \u0432\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u043c\u043e\u0432\u0443, \u0430 \u0442\u043e\u0434\u0456 \u0432\u0436\u0435 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0442\u0435 \u0444\u0430\u0439\u043b\u0438!")},n.batchUpload=function(){var e=Object(w.a)(j.a.mark(function e(t){var a,r;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({isLoading:!0}),a=t.target.files,!n.isFirstLanguage&&n.state.selectedLanguage.id!==n.usedLanguages[0].id){e.next=14;break}r=0;case 4:if(!(r<a.length)){e.next=10;break}return e.next=7,n.onBatchAddItem(a[r]);case 7:r++,e.next=4;break;case 10:n.isFirstLanguage=!1,n.usedLanguages.push(n.state.selectedLanguage),e.next=15;break;case 14:n.onBatchUpdateItems(a);case 15:n.setState({isLoading:!1});case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleChangeOrder=function(e,t){var a=n.state.speeches.length;if(e<=a&&e>0){var r=n.state.speeches,c=r.filter(function(e){return e.order===t})[0];if(e<t){var i=r.filter(function(n){return n.order>=e&&n.order<t}),o=!0,s=!1,u=void 0;try{for(var l,p=i[Symbol.iterator]();!(o=(l=p.next()).done);o=!0){var d=l.value;d.order=d.order+1}}catch(k){s=!0,u=k}finally{try{o||null==p.return||p.return()}finally{if(s)throw u}}c.order=e,i.push(c)}else if(e>t){var h=r.filter(function(n){return n.order>t&&n.order<=e}),f=!0,m=!1,g=void 0;try{for(var b,v=h[Symbol.iterator]();!(f=(b=v.next()).done);f=!0){var x=b.value;x.order=x.order-1}}catch(k){m=!0,g=k}finally{try{f||null==v.return||v.return()}finally{if(m)throw g}}c.order=e,h.push(c)}n.setState({speeches:r})}else alert("\u041d\u0435\u0456\u0441\u043d\u0443\u044e\u0447\u0438\u0439 \u043d\u043e\u043c\u0435\u0440 \u0444\u0440\u0430\u0437\u0438!")},n.removeNewLoadedFiles=Object(w.a)(j.a.mark(function e(){var t;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.fileToBeUploadData.filter(function(e){return e.isNew}).map(function(e){return e.fileName}),e.next=3,n.unloadFilesAsync(t);case 3:case"end":return e.stop()}},e,this)})),n.handleLangCheckboxChange=function(e){return function(t){var a=[],r=Object(M.a)(n.state.languages),c=!0,i=!1,o=void 0;try{for(var s,u=r[Symbol.iterator]();!(c=(s=u.next()).done);c=!0){var l=s.value;l.id===e?(l.isChoosed=!l.isChoosed,void 0!==n.state.selectedLanguage&&0==l.isChoosed&&l.id==n.state.selectedLanguage.id&&n.setState({selectedLanguage:void 0}),a.push(l)):a.push(l)}}catch(p){i=!0,o=p}finally{try{c||null==u.return||u.return()}finally{if(i)throw o}}n.setState({languages:a})}},n.checkIfNewAudiosAreLoaded=function(){return-1===n.state.performanceId?n.state.fileToBeUploadData.length>0:n.state.fileToBeUploadData.filter(function(e){return!0===e.isNew}).length>0},n.uploadAndSaveAudioAsync=function(){var e=Object(w.a)(j.a.mark(function e(t,r,c){var i,o,s,u,l,p,d,h,f,m,g,b,v,x;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=Object(M.a)(n.state.languages.filter(function(e){return!0===e.isChoosed}).map(function(e){return e.id})),o=Object(M.a)(n.state.fileToBeUploadData.filter(function(e){return i.find(function(t){return t===e.languageId})})),s=Object(M.a)(n.state.fileToBeUploadData.filter(function(e){return!i.find(function(t){return t===e.languageId})})),u=0;case 4:if(!(u<o.length)){e.next=53;break}if(o[u].speechIndex!==n.state.speeches[r].id){e.next=50;break}if(c!==a.POST){e.next=12;break}return l={fileName:o[u].fileName,originalText:o[u].originalText,languageId:o[u].languageId,speechId:t},e.next=10,q.post("audio",l,{headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});case 10:e.next=50;break;case 12:if(c!==a.PUT){e.next=50;break}if(void 0!==(p={fileName:o[u].fileName,originalText:o[u].originalText,languageId:o[u].languageId,speechId:t,id:o[u].audioId}).id){e.next=19;break}return e.next=17,q.post("audio",p,{headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});case 17:e.next=21;break;case 19:return e.next=21,q.put("audio/"+p.id,p,{headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});case 21:return e.next=23,q.get("speech/"+p.speechId+"/audios");case 23:d=e.sent,h=n.state.languages.filter(function(e){return!1===e.isChoosed}).map(function(e){return e.id}),f=!0,m=!1,g=void 0,e.prev=28,b=j.a.mark(function e(){var t;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=x.value,!h.find(function(e){return e===t.languageId})){e.next=4;break}return e.next=4,q.delete("audio/".concat(t.id),{headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});case 4:case"end":return e.stop()}},e,this)}),v=d.data[Symbol.iterator]();case 31:if(f=(x=v.next()).done){e.next=36;break}return e.delegateYield(b(),"t0",33);case 33:f=!0,e.next=31;break;case 36:e.next=42;break;case 38:e.prev=38,e.t1=e.catch(28),m=!0,g=e.t1;case 42:e.prev=42,e.prev=43,f||null==v.return||v.return();case 45:if(e.prev=45,!m){e.next=48;break}throw g;case 48:return e.finish(45);case 49:return e.finish(42);case 50:u++,e.next=4;break;case 53:n.unloadFilesAsync(s.map(function(e){return e.fileName}));case 54:case"end":return e.stop()}},e,this,[[28,38,42,50],[43,,45,49]])}));return function(t,n,a){return e.apply(this,arguments)}}(),n.onBatchAddItem=function(){var e=Object(w.a)(j.a.mark(function e(t){var a,r,c,i;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.addItemHandler(),n.changeAndAssignTextToSpeech(a,t),r="".concat(a.id,"_").concat(n.state.selectedLanguage.id,".mp3"),c=new File([t],r,{type:t.type}),(i=new FormData).append("File",c),e.next=8,q.post("audio/upload",i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){n.onFileChange(c.name,t.name,n.state.selectedLanguage.id,a.id)}).catch(function(){alert("Sorry! Some error was occured!")});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.changeAndAssignTextToSpeech=function(e,t){var a=t.name.search(/\.mp3$/),r=t.name.substring(0,a),c=n.state.speeches.findIndex(function(t){return t.id===e.id}),i=Object(F.a)({},n.state.speeches[c]);i.text=r;var o=Object(M.a)(n.state.speeches);o[c]=i,n.setState({speeches:o})},n.onBatchUpdateItems=function(){var e=Object(w.a)(j.a.mark(function e(t){var a,r,c,i,o,s;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.state.fileToBeUploadData.filter(function(e){return e.languageId===n.state.selectedLanguage.id}).map(function(e){return e.speechIndex}),r=n.state.speeches.filter(function(e){return!a.includes(e.id)}).sort(function(e,t){return e.order>t.order?1:-1}),!(t.length<=r.length)){e.next=25;break}c={isEqual:!0,errorMessage:""},i=0;case 5:if(!(i<t.length)){e.next=12;break}if((c=n.checkIsOriginalTextInFileEqual(t[i],r[i].id)).isEqual){e.next=9;break}return e.abrupt("break",12);case 9:i++,e.next=5;break;case 12:if(!c.isEqual){e.next=22;break}o=j.a.mark(function e(a){var c,i,o,s;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=t[a],i="".concat(r[a].id,"_").concat(n.state.selectedLanguage.id,".mp3"),o=new File([c],i,{type:c.type}),(s=new FormData).append("File",o),e.next=7,q.post("audio/upload",s,{headers:{"content-type":"multipart/form-data"}}).then(function(){return n.onFileChange(o.name,c.name,n.state.selectedLanguage.id,r[a].id)}).catch(function(){return alert("Sorry, some error occured...")});case 7:case"end":return e.stop()}},e,this)}),s=0;case 15:if(!(s<t.length)){e.next=20;break}return e.delegateYield(o(s),"t0",17);case 17:s++,e.next=15;break;case 20:e.next=23;break;case 22:alert(c.errorMessage);case 23:e.next=26;break;case 25:alert("\u041d\u0435\u043a\u043e\u0440\u0435\u0442\u043d\u0430 \u0432\u0438\u0431\u0440\u0430\u043d\u0430 \u043a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0444\u0430\u0439\u043b\u0456\u0432.");case 26:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.checkIsOriginalTextInFileEqual=function(e,t){var a=Object(M.a)(n.state.fileToBeUploadData.filter(function(e){return e.speechIndex===t}));if(a.length>0&&a[0].originalText!==e.name){var r=n.state.speeches.find(function(e){return e.id===t});return void 0!==r?{isEqual:!1,errorMessage:"\u0406\u043c'\u044f \u0430\u0443\u0434\u0456\u043e \u0444\u0430\u0439\u043b\u0443 \u043d\u0435 \u0441\u043f\u0456\u0432\u043f\u0430\u0434\u0430\u0454 \u0437 \u0456\u043c\u0435\u043d\u0435\u043c \u0444\u0430\u0439\u043b\u0443, "+"\u0449\u043e \u0431\u0443\u0432 \u0432\u0436\u0435 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u0438\u0439 \u0434\u043e \u0434\u0430\u043d\u043e\u0457 \u0440\u0435\u043f\u043b\u0456\u043a\u0438 \u043f\u0456\u0434 \u043d\u043e\u043c\u0435\u0440\u043e\u043c ".concat(r.order,".")}:{isEqual:!0,errorMessage:"Error!"}}return{isEqual:!0,errorMessage:""}},n.addItemHandler=function(){var e=n.state.speeches,t={id:0!==n.state.speeches.length?Math.max.apply(null,n.state.speeches.map(function(e){return e.id}))+1:0,text:"",order:1,languages:n.state.languages,isNew:!0,onDelete:n.deleteItemHandler,onTextChange:n.textChangeHandler,onFileChange:n.onFileChange};return 0!==e.length&&(t.order=0!==n.state.speeches.length?Math.max.apply(null,n.state.speeches.map(function(e){return e.order}))+1:1),e.push(t),n.setState({speeches:e}),Object(F.a)({},t)},n.deleteItemHandler=function(){var e=Object(w.a)(j.a.mark(function e(t){var a,r,c,i,o,s,u,l,p,d,h,f;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({isLoading:!0}),void 0===(a=n.state.speeches.find(function(e){return e.id===t}))){e.next=48;break}if(-1!==n.state.performanceId){e.next=8;break}return e.next=6,n.removeLocalSpeechesAsync(t).catch(function(e){return alert(e)});case 6:e.next=48;break;case 8:if(a.isNew){e.next=46;break}return e.next=11,q.delete("speech/"+t);case 11:if(204!==(r=e.sent).status){e.next=43;break}if(!((c=n.state.fileToBeUploadData.filter(function(e){return e.isNew&&e.speechIndex===t})).length>0)){e.next=18;break}return n.props.onDeleteNewFilesName(c),e.next=18,n.unloadFilesAsync(c.map(function(e){return e.fileName}));case 18:for(i=n.state.speeches.filter(function(e){return e.id!==t}),o=i.filter(function(e){return e.order>a.order}),s=!0,u=!1,l=void 0,e.prev=23,p=o[Symbol.iterator]();!(s=(d=p.next()).done);s=!0)(h=d.value).order=h.order-1;e.next=31;break;case 27:e.prev=27,e.t0=e.catch(23),u=!0,l=e.t0;case 31:e.prev=31,e.prev=32,s||null==p.return||p.return();case 34:if(e.prev=34,!u){e.next=37;break}throw l;case 37:return e.finish(34);case 38:return e.finish(31);case 39:f=n.state.fileToBeUploadData.filter(function(e){return e.speechIndex!==t}),n.setState({speeches:i,fileToBeUploadData:f}),e.next=44;break;case 43:alert(r.data);case 44:e.next=48;break;case 46:return e.next=48,n.removeLocalSpeechesAsync(t).catch(function(e){return alert(e)});case 48:n.setState({isLoading:!1});case 49:case"end":return e.stop()}},e,this,[[23,27,31,39],[32,,34,38]])}));return function(t){return e.apply(this,arguments)}}(),n.removeLocalSpeechesAsync=function(){var e=Object(w.a)(j.a.mark(function e(t){var a,r,c,i,o,s,u,l,p,d,h;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state.speeches.filter(function(e){return e.id!==t}),r=[],c=n.state.fileToBeUploadData.filter(function(e){if(e.speechIndex!==t)return e;r.push(e.fileName)}),n.props.onDeleteNewFilesName(r),e.next=6,n.unloadFilesAsync(r);case 6:for(i=n.state.speeches.find(function(e){return e.id===t}),o=a.filter(function(e){return e.order>i.order}),s=!0,u=!1,l=void 0,e.prev=11,p=o[Symbol.iterator]();!(s=(d=p.next()).done);s=!0)(h=d.value).order=h.order-1;e.next=19;break;case 15:e.prev=15,e.t0=e.catch(11),u=!0,l=e.t0;case 19:e.prev=19,e.prev=20,s||null==p.return||p.return();case 22:if(e.prev=22,!u){e.next=25;break}throw l;case 25:return e.finish(22);case 26:return e.finish(19);case 27:n.setState({speeches:a,fileToBeUploadData:c});case 28:case"end":return e.stop()}},e,this,[[11,15,19,27],[20,,22,26]])}));return function(t){return e.apply(this,arguments)}}(),n.unloadFilesAsync=function(){var e=Object(w.a)(j.a.mark(function e(t){var n,a,r,c,i,o,s;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=24;break}for(n="?",a=!0,r=!1,c=void 0,e.prev=5,i=t[Symbol.iterator]();!(a=(o=i.next()).done);a=!0)s=o.value,n+="files=".concat(s,"&");e.next=13;break;case 9:e.prev=9,e.t0=e.catch(5),r=!0,c=e.t0;case 13:e.prev=13,e.prev=14,a||null==i.return||i.return();case 16:if(e.prev=16,!r){e.next=19;break}throw c;case 19:return e.finish(16);case 20:return e.finish(13);case 21:return n.slice(n.length-1,1),e.next=24,q.delete("/audio/unload/"+n);case 24:case"end":return e.stop()}},e,this,[[5,9,13,21],[14,,16,20]])}));return function(t){return e.apply(this,arguments)}}(),n.textChangeHandler=function(e,t){for(var a=Object(M.a)(n.state.speeches),r=0;r<a.length;r++)a[r].id===t&&(a[r].text=e);n.setState({speeches:a})},n.state={performanceId:-1,languages:[],speeches:[],fileToBeUploadData:[],tooltipAddOpen:!1,dropdownOpen:!1,selectedLanguage:void 0,tooltipUploadBatch:!1,isLoading:!0},n.addItemHandler=n.addItemHandler.bind(Object(A.a)(Object(A.a)(n))),n.deleteItemHandler=n.deleteItemHandler.bind(Object(A.a)(Object(A.a)(n))),n.uploadHandler=n.uploadHandler.bind(Object(A.a)(Object(A.a)(n))),n.textChangeHandler=n.textChangeHandler.bind(Object(A.a)(Object(A.a)(n))),n.tooltipAddToggle=n.tooltipAddToggle.bind(Object(A.a)(Object(A.a)(n))),n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"audioComponentDidMount",value:function(){var e=Object(w.a)(j.a.mark(function e(t){var n,a,r,c,i,o,s,u,l,p,d,h,f,m,g,b,v,x,k,y,E,O,C;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===t){e.next=58;break}return e.next=3,q.get("performance/"+t+"/speeches");case 3:if(200===(n=e.sent).status){for(a=[],r=0;r<n.data.length;r++)c={id:n.data[r].id,text:n.data[r].text,order:n.data[r].order,languages:this.state.languages,onDelete:this.deleteItemHandler,onTextChange:this.textChangeHandler,onFileChange:this.onFileChange},a.push(c);this.setState({performanceId:n.data.performanceId,speeches:a})}i=[],o=0;case 7:if(!(o<n.data.length)){e.next=15;break}return e.next=10,q.get("speech/"+n.data[o].id+"/audios");case 10:for(s=e.sent,u=0;u<s.data.length;u++)l={audioId:s.data[u].id,fileName:s.data[u].fileName,originalText:s.data[u].originalText,languageId:s.data[u].languageId,speechIndex:s.data[u].speechId,isNew:!1},i.push(l);case 12:o++,e.next=7;break;case 15:return e.next=17,q.get("language");case 17:p=e.sent,d=!0,h=!1,f=void 0,e.prev=21,m=p.data[Symbol.iterator]();case 23:if(d=(g=m.next()).done){e.next=40;break}b=g.value,v=0;case 26:if(!(v<i.length)){e.next=37;break}if(i[v].languageId!==b.id){e.next=33;break}return b.isChoosed=!0,e.abrupt("break",37);case 33:b.isChoosed=!1;case 34:v++,e.next=26;break;case 37:d=!0,e.next=23;break;case 40:e.next=46;break;case 42:e.prev=42,e.t0=e.catch(21),h=!0,f=e.t0;case 46:e.prev=46,e.prev=47,d||null==m.return||m.return();case 49:if(e.prev=49,!h){e.next=52;break}throw f;case 52:return e.finish(49);case 53:return e.finish(46);case 54:200===p.status&&this.setState({languages:p.data}),this.setState({fileToBeUploadData:i}),e.next=81;break;case 58:return e.next=60,q.get("language");case 60:for(x=e.sent,k=!0,y=!1,E=void 0,e.prev=64,O=x.data[Symbol.iterator]();!(k=(C=O.next()).done);k=!0)C.value.isChoosed=!0;e.next=72;break;case 68:e.prev=68,e.t1=e.catch(64),y=!0,E=e.t1;case 72:e.prev=72,e.prev=73,k||null==O.return||O.return();case 75:if(e.prev=75,!y){e.next=78;break}throw E;case 78:return e.finish(75);case 79:return e.finish(72);case 80:200===x.status&&this.setState({languages:x.data});case 81:this.setState({isLoading:!1});case 82:case"end":return e.stop()}},e,this,[[21,42,46,54],[47,,49,53],[64,68,72,80],[73,,75,79]])}));return function(t){return e.apply(this,arguments)}}()},{key:"tooltipAddToggle",value:function(){this.setState({tooltipAddOpen:!this.state.tooltipAddOpen})}},{key:"compare",value:function(e,t){return e.order<t.order?-1:e.order>t.order?1:0}},{key:"render",value:function(){var e=this,t=Object(M.a)(this.state.speeches).sort(this.compare),n=Object(M.a)(this.state.languages).sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),a=0!==n.length?n.map(function(t,n){return r.createElement("label",{key:t.id},r.createElement("a",null,t.name,": "),r.createElement("input",{className:"langCheckbox",name:"isGoi",type:"checkbox",checked:t.isChoosed,onChange:e.handleLangCheckboxChange(t.id)}))}):r.createElement("p",{style:{color:"grey"}}," \u041c\u043e\u0432\u0438 \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456. \u0414\u043e\u0431\u0430\u0432\u0442\u0435 \u043c\u043e\u0432\u0443 \u043d\u0430 \u043f\u043e\u0447\u0430\u0442\u043a\u043e\u0432\u0456\u0439 \u0441\u0442\u043e\u0440\u0456\u043d\u0446\u0456 \u0432 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0456 \u043c\u043e\u0432. "),c=0!==t.length?t.map(function(t,n){return r.createElement(Q,{key:n,id:t.id,order:t.order,text:t.text,languages:e.state.languages.filter(function(e){return e.isChoosed}),onDelete:t.onDelete,fileToBeUploadData:e.state.fileToBeUploadData,onTextChange:t.onTextChange,onFileChange:t.onFileChange,handleChangeOrder:e.handleChangeOrder,checkIsOriginalTextEqual:e.checkIsOriginalTextInFileEqual,ref:e.child})}):r.createElement("p",{style:{color:"grey",marginTop:10}}," \u0414\u043e\u0431\u0430\u0432\u0442\u0435 \u0444\u0440\u0430\u0437\u0443 \u0430\u0431\u043e \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0442\u0435 \u043f\u0430\u043a\u0435\u0442\u043e\u043c. "),i=this.state.languages.filter(function(e){return!0===e.isChoosed}).map(function(t){return r.createElement(R.c,{key:t.id,onClick:function(){return e.toggleSelectedLanguage(t.id)}},t.name)}),o=void 0===this.state.selectedLanguage?"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u043c\u043e\u0432\u0443...":this.state.selectedLanguage.name,s=void 0===this.state.selectedLanguage,u=r.createElement("div",null,r.createElement("label",null,"\u041f\u0430\u043a\u0435\u0442\u043e\u043c: "),r.createElement(R.b,{className:"dropdown-toggle-language",isOpen:this.state.dropdownOpen,toggle:function(){return e.toggleDropdown()},size:"sm"},r.createElement(R.e,{caret:!0},o),r.createElement(R.d,null,i)),r.createElement("input",{type:"file",id:"batchUpload",className:"inputFile",onChange:this.batchUpload,onClick:function(e){return e.target.value=null},multiple:!0}),r.createElement("button",{id:"batchUploadBtn",className:"fas fa-plus-circle btn-audio-add "+(s?"disabled-btn-audio-add":""),onClick:this.onBatchUpload}),r.createElement(R.n,{placement:"top",isOpen:this.state.tooltipUploadBatch,autohide:!1,target:"batchUploadBtn",toggle:this.tooltipUploadBatchOpen},"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0430\u0443\u0434\u0456\u043e"));return r.createElement("div",{className:"audio-upload-section"},r.createElement(U,{isShow:this.state.isLoading}),r.createElement("div",{className:"langCheckboxList"},a),r.createElement("div",{className:"col-sm-12 audio-header"},r.createElement("div",null,r.createElement("label",null,"\u0412\u0440\u0443\u0447\u043d\u0443: "),r.createElement("button",{className:"fas fa-plus-circle btn-audio-add",onClick:this.addItemHandler,id:"addBtn"}),r.createElement(R.n,{placement:"right",isOpen:this.state.tooltipAddOpen,autohide:!1,target:"addBtn",toggle:this.tooltipAddToggle},"\u0414\u043e\u0434\u0430\u0442\u0438 \u0444\u0440\u0430\u0437\u0443 ")),u),r.createElement("div",{id:"audio-container",className:"row"},c))}}]),t}(r.Component),Z=Object(s.b)(function(e){return{isNewFilesLoaded:e.audioUpload.isNewFilesLoaded}},function(e){return{onChangeIsNewFilesLoaded:function(t){return e(function(e){return{type:"CHANGE_IS_NEW_FILES_LOADED",payload:{nextValue:e}}}(t))},onAddNewFilesName:function(t){return e(function(e){return{type:"ADD_NEW_FILES_NAME",payload:{filename:e}}}(t))},onDeleteNewFilesName:function(t){return e(function(e){return{type:"DELETE_NEW_FILES_NAME",payload:{filenames:e}}}(t))},onChangeAudioUploadToInitialState:function(){return e({type:"CHANGE_TO_AUDIO_UPLOAD_INITIAL_STATE",payload:{}})}}},null,{forwardRef:!0})(J),X=(n(149),function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(m.a)(this,Object(g.a)(t).call(this,e))).child=c.a.createRef(),n.apimanager=new L,n.isSaved=!1,n.onCancelHandler=function(){var e=Object(w.a)(j.a.mark(function e(t){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.child.current.checkIfNewAudiosAreLoaded()){e.next=10;break}if(!1,!(-1===n.state.id?confirm("\u0411\u0443\u043b\u0438 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u0456 \u043d\u043e\u0432\u0456 \u0444\u0430\u0439\u043b\u0438. \u0412\u0438 \u0441\u043f\u0440\u0430\u0432\u0434\u0456 \u0445\u043e\u0447\u0435\u0442\u0435 \u0437\u0430\u043b\u0438\u0448\u0438\u0442\u0438 \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0443 \u0456 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0444\u0430\u0439\u043b\u0438?"):confirm("\u0411\u0443\u043b\u0438 \u0437\u043c\u0456\u043d\u0435\u043d\u0456 \u0434\u0435\u044f\u043a\u0456 \u0444\u0430\u0439\u043b\u0438. \u0412\u0438 \u0441\u043f\u0440\u0430\u0432\u0434\u0456 \u0445\u043e\u0447\u0435\u0442\u0435 \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u043d\u043e\u0432\u0443 \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0443 \u0456 \u0437\u0430\u043b\u0438\u0448\u0438\u0442\u0438 \u0441\u0442\u0430\u0440\u0456 \u0437\u043c\u0456\u043d\u0438?"))){e.next=9;break}return e.next=7,n.child.current.removeNewLoadedFiles();case 7:e.next=10;break;case 9:t.preventDefault();case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleErrors=function(e){500===e.status?(console.log(e),alert("\u0412\u0438\u043d\u0438\u043a\u043b\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0456!")):(console.log(e),alert("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u0456\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u0438\u0441\u044c \u0434\u043e \u0441\u0435\u0440\u0432\u0435\u0440\u0443. \u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0442\u0435 \u0437'\u0454\u0434\u043d\u0430\u043d\u043d\u044f \u0437 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c."))},n.state={id:-1,title:"",description:"",isShow:!1},n.handleChange=n.handleChange.bind(Object(A.a)(Object(A.a)(n))),n.handleSave=n.handleSave.bind(Object(A.a)(Object(A.a)(n))),n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value;"title"===e.target.name?this.setState({title:t}):"description"===e.target.name&&this.setState({description:t})}},{key:"handleSave",value:function(){var e=Object(w.a)(j.a.mark(function e(){var t,n,a,r,c,i,o,s,u;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isShow:!0}),t=this.state.title,n=this.state.description,""===t||""===n){e.next=56;break}if(a=this.child.current.isSpeechesCorrect()){e.next=53;break}if(-1===this.state.id){e.next=28;break}return e.next=9,this.apimanager.updatePerformance(JSON.stringify(this.state),this.state.id);case 9:if(204!==(r=e.sent).status){e.next=25;break}if(this.child.current){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,this.child.current.uploadHandler(this.state.id,!0);case 15:if(void 0===(c=e.sent)){e.next=20;break}return alert(c.errorMessage),this.setState({isShow:!1}),e.abrupt("return");case 20:return P.push("/streamer/performance/"+this.state.id),e.next=23,this.loadData();case 23:e.next=26;break;case 25:this.handleErrors(r);case 26:e.next=51;break;case 28:return i={title:this.state.title,description:this.state.description},e.next=31,this.apimanager.createPerformance(JSON.stringify(i));case 31:if(201!==(o=e.sent).status){e.next=50;break}if(this.child.current){e.next=35;break}return e.abrupt("return");case 35:return e.next=37,o.json();case 37:return s=e.sent,e.next=40,this.child.current.uploadHandler(s.id,!1);case 40:if(void 0===(u=e.sent)){e.next=45;break}return alert(u.errorMessage),this.setState({isShow:!1}),e.abrupt("return");case 45:return P.push("/streamer/performance/"+s.id),e.next=48,this.loadData();case 48:e.next=51;break;case 50:this.handleErrors(o);case 51:e.next=54;break;case 53:alert(a.errorMessage);case 54:e.next=57;break;case 56:alert("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u0442\u0430 \u043e\u043f\u0438\u0441 \u0432\u0438\u0441\u0442\u0430\u0432\u0438...");case 57:this.setState({isShow:!1});case 58:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadData",value:function(){var e=Object(w.a)(j.a.mark(function e(){var t,n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("new"===this.props.match.params.number){e.next=17;break}return e.next=3,this.apimanager.getPerformanceById(this.props.match.params.number);case 3:if(200!==(t=e.sent).status){e.next=14;break}return e.next=7,t.json();case 7:if(n=e.sent,this.setState({id:n.id,title:n.title,description:n.description}),this.child.current){e.next=11;break}return e.abrupt("return");case 11:this.child.current.audioComponentDidMount(n.id),e.next=15;break;case 14:this.handleErrors(t);case 15:e.next=20;break;case 17:if(this.child.current){e.next=19;break}return e.abrupt("return");case 19:this.child.current.audioComponentDidMount(this.state.id);case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return c.a.createElement("div",{className:"editForm"},c.a.createElement(U,{isShow:this.state.isShow}),c.a.createElement("div",{className:"formHeader"},c.a.createElement("p",null,"new"===this.props.match.params.number?"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f \u0432\u0438\u0441\u0442\u0430\u0432\u0438":"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f \u0432\u0438\u0441\u0442\u0430\u0432\u0438"),c.a.createElement("div",{className:"text-right"},c.a.createElement("button",{className:"saveButton",onClick:this.handleSave},c.a.createElement("i",{className:"fas fa-check-circle saveIcon"}),"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"),c.a.createElement(I.a,{to:"/streamer/performance/",onClick:this.onCancelHandler},c.a.createElement("button",{className:"cancelButton"},c.a.createElement("i",{className:"fas fa-times-circle saveIcon"}),"\u0412i\u0434\u043ci\u043d\u0430")))),c.a.createElement("input",{type:"hidden",readOnly:!0,value:this.state.id}),c.a.createElement("p",{className:"formTitles"},"\u041d\u0430\u0437\u0432\u0430 \u0432\u0438\u0441\u0442\u0430\u0432\u0438"),c.a.createElement("input",{type:"text",name:"title",onChange:this.handleChange,value:this.state.title}),c.a.createElement("p",{className:"formTitles"},"\u041e\u043f\u0438\u0441 \u0432\u0438\u0441\u0442\u0430\u0432\u0438"),c.a.createElement("textarea",{className:"descrField",name:"description",onChange:this.handleChange,value:this.state.description}),c.a.createElement(Z,{ref:this.child}))}},{key:"componentDidMount",value:function(){this.loadData()}}]),t}(r.Component)),$=(n(59),n(153),function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(m.a)(this,Object(g.a)(t).call(this,e))).state={tooltipOpen:!1,modal:!1},n.toggle=n.toggle.bind(Object(A.a)(Object(A.a)(n))),n.tooltipToggle=n.tooltipToggle.bind(Object(A.a)(Object(A.a)(n))),n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"toggle",value:function(){this.setState({tooltipOpen:!1,modal:!this.state.modal})}},{key:"tooltipToggle",value:function(){this.setState({tooltipOpen:!this.state.tooltipOpen})}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(R.j,{isOpen:this.state.modal,toggle:this.toggle,className:"removePerformancePopup"},c.a.createElement(R.m,{className:"popupHeader",toggle:this.toggle}),c.a.createElement(R.k,{className:"popupBody"},this.props.message),c.a.createElement(R.l,{className:"popupHeader"},c.a.createElement(R.a,{color:"danger",onClick:this.props.removeMethod},this.props.labelDangerButton),c.a.createElement(R.a,{color:"primary",onClick:this.toggle},this.props.labelPrimaryButton))))}}]),t}(c.a.Component)),ee=function(){function e(){Object(h.a)(this,e),this.backendUrl="",this.backendUrl=T.a.get("urlApi")}return Object(f.a)(e,[{key:"createLang",value:function(){var e=Object(w.a)(j.a.mark(function e(t){var n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.backendUrl,"api/Language"),{method:"POST",headers:{Accept:"application/json","Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateLang",value:function(){var e=Object(w.a)(j.a.mark(function e(t,n){var a;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.backendUrl,"api/Language/").concat(t),{method:"PUT",headers:{Accept:"application/json","Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:n});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getLang",value:function(){var e=Object(w.a)(j.a.mark(function e(){var t;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.backendUrl,"api/Language"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getLangById",value:function(){var e=Object(w.a)(j.a.mark(function e(t){var n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.backendUrl,"api/Language/").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"removeLang",value:function(){var e=Object(w.a)(j.a.mark(function e(t){var n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.backendUrl,"api/Language/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),te=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(m.a)(this,Object(g.a)(t).call(this,e))).changeCurrentLanguageHandler=function(e){var t=e;n.props.updateCurrentLang(t),n.setState(function(e){return{currentLanguage:t}})},n.toggle=n.toggle.bind(Object(A.a)(Object(A.a)(n))),n.state={currentLanguage:{id:0,name:"\u041c\u043e\u0432\u0430"},dropdownOpen:!1},n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"toggle",value:function(){this.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})}},{key:"compare",value:function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}},{key:"render",value:function(){var e,t=this,n=this.props.languages.sort(this.compare);return e=c.a.createElement("div",null,n.map(function(e,n){return n=e.id,c.a.createElement(R.c,{key:n,onClick:function(){return t.changeCurrentLanguageHandler(e)}},e.name)})),c.a.createElement(R.b,{isOpen:this.state.dropdownOpen,toggle:this.toggle},c.a.createElement(R.e,{caret:!0},this.state.currentLanguage.name),c.a.createElement(R.d,null,e))}}]),t}(c.a.Component),ne=(n(155),function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(m.a)(this,Object(g.a)(t).call(this,e))).apiManager=new ee,n.child=c.a.createRef(),n.getLang=Object(w.a)(j.a.mark(function e(){var t,a;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.apiManager.getLang();case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n.setState({languages:a});case 7:case"end":return e.stop()}},e,this)})),n.onAddLang=function(){var e=Object(w.a)(j.a.mark(function e(t){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.apiManager.createLang(JSON.stringify(t));case 2:e.sent,n.getLang();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.onDelLang=function(){var e=Object(w.a)(j.a.mark(function e(t){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.apiManager.removeLang(t.id);case 2:e.sent,n.getLang();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.onUpdateLang=function(){var e=Object(w.a)(j.a.mark(function e(t){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.apiManager.updateLang(t.id,JSON.stringify(t));case 2:e.sent,n.getLang();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.radioHandler=function(e){var t=e.target.value;n.setState({radioState:t})},n.updateCurrentLang=function(e){n.setState({currentLang:e})},n.nameUpdateHandler=function(){-1!==n.state.currentLang.id?n.state.languages.find(function(e){return e.name===n.state.currentLang.name})?alert('\u041c\u043e\u0432\u0430 \u0437 \u043d\u0430\u0437\u0432\u043e\u044e "'.concat(n.state.currentLang.name,'" \u0432\u0436\u0435 \u0456\u0441\u043d\u0443\u0454')):(n.onUpdateLang(n.state.currentLang),n.setState({currentLang:{id:-1,name:""}}),n.toggle()):alert("\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u043c\u043e\u0432\u0443")},n.nameChangedHandler=function(e){n.setState({currentLang:{id:n.state.currentLang.id,name:e.target.value}})},n.languageDeleteHandler=function(){-1!==n.state.currentLang.id?(n.onDelLang(n.state.currentLang),n.setState({currentLang:{id:-1,name:""}}),n.toggle()):alert("\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u043c\u043e\u0432\u0443")},n.languageAddHandler=function(){if(""===n.state.currentLang.name)alert("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u043c\u043e\u0432\u0438");else if(n.state.languages.find(function(e){return e.name===n.state.currentLang.name}))alert('\u041c\u043e\u0432\u0430 \u0437 \u043d\u0430\u0437\u0432\u043e\u044e "'.concat(n.state.currentLang.name,'" \u0432\u0436\u0435 \u0456\u0441\u043d\u0443\u0454'));else{var e={id:0,name:n.state.currentLang.name};n.onAddLang(e),n.toggle()}},n.toggleChildComponent=function(){var e=Object(w.a)(j.a.mark(function e(t){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===n.state.currentLang.id){e.next=6;break}if(n.child.current){e.next=3;break}return e.abrupt("return");case 3:n.child.current.toggle(),e.next=7;break;case 6:alert("\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u043c\u043e\u0432\u0443");case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.state={currentLang:{id:-1,name:""},languages:[],modal:!1,radioState:""},n.toggle=n.toggle.bind(Object(A.a)(Object(A.a)(n))),n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"toggle",value:function(){this.setState({modal:!this.state.modal,radioState:"",currentLang:{id:-1,name:""}})}},{key:"componentDidMount",value:function(){this.getLang()}},{key:"render",value:function(){var e=this,t=(this.state.currentLang.name,null);return"add"===this.state.radioState?t=c.a.createElement("div",null,c.a.createElement(R.f,null,c.a.createElement(R.i,null,"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u043c\u043e\u0432\u0438 \u0449\u043e\u0431 \u0434\u043e\u0434\u0430\u0442\u0438"),c.a.createElement(R.h,{className:"inputLang",placeholder:"\u041d\u0430\u0437\u0432\u0430 \u043c\u043e\u0432\u0438",onChange:this.nameChangedHandler}),c.a.createElement("br",null),c.a.createElement(R.a,{color:"primary",onClick:function(){return e.languageAddHandler()}},"\u0414\u043e\u0434\u0430\u0442\u0438 \u043c\u043e\u0432\u0443"))):"update"===this.state.radioState?t=c.a.createElement("div",null,c.a.createElement(te,{updateCurrentLang:this.updateCurrentLang,languages:this.state.languages})," ",c.a.createElement("br",null),c.a.createElement(R.f,null,c.a.createElement(R.i,null,"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u043c\u043e\u0432\u0443 \u0434\u043b\u044f \u0440\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f"),c.a.createElement(R.h,{className:"inputLang",onChange:this.nameChangedHandler,value:this.state.currentLang.name}),c.a.createElement("br",null),c.a.createElement(R.a,{color:"primary",onClick:function(){return e.nameUpdateHandler()}},"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"))):"delete"===this.state.radioState&&(t=c.a.createElement("div",null,c.a.createElement(te,{updateCurrentLang:this.updateCurrentLang,languages:this.state.languages})," ",c.a.createElement("br",null),c.a.createElement(R.f,null,c.a.createElement(R.a,{color:"danger",onClick:this.toggleChildComponent},"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043c\u043e\u0432\u0443"),c.a.createElement("br",null),c.a.createElement($,{removeMethod:this.languageDeleteHandler.bind(this),message:"\u0412\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f \u043c\u043e\u0432\u0438 \u043f\u0440\u0438\u0432\u0435\u0434\u0435 \u0434\u043e \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f \u0443\u0441\u0456\u0445 \u0430\u0443\u0434\u0456\u043e\u0437\u0430\u043f\u0438\u0441\u0456\u0432 \u0437\u0432\u044f\u0437\u0430\u043d\u0438\u0445 \u0437 \u0446\u0456\u0454\u044e \u043c\u043e\u0432\u043e\u044e. \u0412\u0438 \u0434\u0456\u0439\u0441\u043d\u043e \u0445\u043e\u0447\u0435\u0442\u0435 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0432\u0438\u0441\u0442\u0430\u0432\u0443?",labelDangerButton:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438",labelPrimaryButton:"\u0412\u0456\u0434\u043c\u0456\u043d\u0438\u0442\u0438",ref:this.child})))),c.a.createElement("div",{className:"languageButton"},c.a.createElement(R.a,{color:"primary",onClick:this.toggle},this.props.buttonLabel),c.a.createElement(R.j,{isOpen:this.state.modal,toggle:this.toggle},c.a.createElement(R.m,{toggle:this.toggle,className:"popupHeader"},"\u041a\u0435\u0440\u0443\u0432\u0430\u043d\u043d\u044f \u043c\u043e\u0432\u0430\u043c\u0438 \u0434\u0443\u0431\u043b\u044f\u0436\u0443"),c.a.createElement(R.k,{className:"popupBody"},c.a.createElement("div",null,c.a.createElement(R.g,{tag:"fieldset"},c.a.createElement(R.g,{check:!0},c.a.createElement(R.i,{check:!0},c.a.createElement(R.h,{type:"radio",name:"radioLang",value:"add",onChange:this.radioHandler})," ","\u0414\u043e\u0434\u0430\u0442\u0438 \u043d\u043e\u0432\u0443 \u043c\u043e\u0432\u0443 \u0434\u0443\u0431\u043b\u044f\u0436\u0443")),c.a.createElement(R.g,{check:!0},c.a.createElement(R.i,{check:!0},c.a.createElement(R.h,{type:"radio",name:"radioLang",value:"update",onChange:this.radioHandler})," ","\u0417\u043c\u0456\u043d\u0438\u0442\u0438 \u043d\u0430\u0437\u0432\u0443 \u043c\u043e\u0432\u0438 \u0434\u0443\u0431\u043b\u044f\u0436\u0443")),c.a.createElement(R.g,{check:!0},c.a.createElement(R.i,{check:!0},c.a.createElement(R.h,{type:"radio",name:"radioLang",value:"delete",onChange:this.radioHandler})," ","\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043c\u043e\u0432\u0443 \u0434\u0443\u0431\u043b\u044f\u0436\u0443")))),t),c.a.createElement(R.l,{className:"popupHeader"},c.a.createElement(R.a,{color:"secondary",onClick:this.toggle},"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"))))}}]),t}(c.a.Component)),ae=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(m.a)(this,Object(g.a)(t).call(this,e))).child=c.a.createRef(),n.toggleChildComponent=function(){var e=Object(w.a)(j.a.mark(function e(t){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.child.current){e.next=2;break}return e.abrupt("return");case 2:n.child.current.toggle();case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.tooltipEditToggle=n.tooltipEditToggle.bind(Object(A.a)(Object(A.a)(n))),n.tooltipRemoveToggle=n.tooltipRemoveToggle.bind(Object(A.a)(Object(A.a)(n))),n.state={tooltipEditOpen:!1,tooltipRemoveOpen:!1},n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"tooltipEditToggle",value:function(){this.setState({tooltipEditOpen:!this.state.tooltipEditOpen})}},{key:"tooltipRemoveToggle",value:function(){this.setState({tooltipRemoveOpen:!this.state.tooltipRemoveOpen})}},{key:"remove",value:function(){this.props.deleteMethod(this.props.index)}},{key:"render",value:function(){return c.a.createElement("div",{className:"performance"},c.a.createElement("div",{className:"row"},c.a.createElement("p",{className:"col-md-11 pull-left perfTitle"},this.props.title),c.a.createElement("div",{className:"col-md-1 text-right PerformanceButtons "},c.a.createElement(I.a,{to:"/streamer/performance/"+this.props.index},c.a.createElement("button",{className:"editBtn",id:"editBtn"+this.props.index}),c.a.createElement(R.n,{placement:"left",isOpen:this.state.tooltipEditOpen,autohide:!1,target:"editBtn"+this.props.index,toggle:this.tooltipEditToggle},"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0432\u0438\u0441\u0442\u0430\u0432\u0443 ")),c.a.createElement("div",null,c.a.createElement("span",{className:"close",onClick:this.toggleChildComponent,id:"actionButton"+this.props.index},"x"),c.a.createElement(R.n,{placement:"left",isOpen:this.state.tooltipRemoveOpen,autohide:!0,target:"actionButton"+this.props.index,toggle:this.tooltipRemoveToggle},"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0432\u0438\u0441\u0442\u0430\u0432\u0443 ")),c.a.createElement($,{removeMethod:this.remove.bind(this),message:"\u0412\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f \u0432\u0438\u0441\u0442\u0430\u0432\u0438 \u043f\u0440\u0438\u0432\u0435\u0434\u0435 \u0434\u043e \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f \u0432\u0441\u0456\u0445 \u0444\u0440\u0430\u0437 \u0456 \u0430\u0443\u0434\u0456\u043e\u0444\u0430\u0439\u043b\u0456\u0432. \u0412\u0438 \u0434\u0456\u0439\u0441\u043d\u043e \u0445\u043e\u0447\u0435\u0442\u0435 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0432\u0438\u0441\u0442\u0430\u0432\u0443?",labelDangerButton:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438",labelPrimaryButton:"\u0412\u0456\u0434\u043c\u0456\u043d\u0438\u0442\u0438",ref:this.child}))),c.a.createElement("p",{className:"perfDescr"},this.props.description),c.a.createElement(I.a,{to:"/streamer/stream/"+this.props.index,className:"gotoPerfLink"},c.a.createElement("button",{className:"gotoPerfBtn "},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0434\u043e \u0432\u0438\u0441\u0442\u0430\u0432\u0438 ",c.a.createElement("div",{className:"gotoImage"}))))}}]),t}(r.Component),re=(n(157),function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(m.a)(this,Object(g.a)(t).call(this,e))).apimanager=new L,n.getPerformances=Object(w.a)(j.a.mark(function e(){var t,a;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.apimanager.getPerformances();case 2:if(200!==(t=e.sent).status){e.next=10;break}return e.next=6,t.json();case 6:a=e.sent,n.setState({performances:a}),e.next=11;break;case 10:500===t.status?alert("\u0412\u0438\u043d\u0438\u043a\u043b\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0456."):alert("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u0456\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u0438\u0441\u044c \u0434\u043e \u0441\u0435\u0440\u0432\u0435\u0440\u0443. \u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0442\u0435 \u0437'\u0454\u0434\u043d\u0430\u043d\u043d\u044f \u0437 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c.");case 11:case"end":return e.stop()}},e,this)})),n.onChange=function(){var e=Object(w.a)(j.a.mark(function e(t){var n,a;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.files[0],(a=new FormData).append("File",n),".mp3"===n.name.slice(-4)){e.next=5;break}return e.abrupt("return",alert("\u0412\u0438 \u043d\u0430\u043c\u0430\u0433\u0430\u0454\u0442\u0435\u0441\u044c \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u043d\u0435 \u0430\u0443\u0434\u0456\u043e \u0444\u0430\u0439\u043b"));case 5:return e.next=7,q.post("audio/upload/waiting",a,{headers:{"Content-Type":"multipart/form-data"}});case 7:alert("\u0410\u0443\u0434\u0456\u043e \u0444\u0430\u0439\u043b, \u0449\u043e \u0433\u0440\u0430\u0454 \u043f\u0456\u0434 \u0447\u0430\u0441 \u043e\u0447\u0456\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0456\u0457, \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043e");case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.state={performances:[],isLoading:!0},n.removePerformance=n.removePerformance.bind(Object(A.a)(Object(A.a)(n))),n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"removePerformance",value:function(){var e=Object(w.a)(j.a.mark(function e(t){var n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apimanager.removePerformance(t);case 2:204===e.sent.status?(n=this.state.performances.filter(function(e){return e.id!==t}),this.setState({performances:n})):this.getPerformances();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleUploadClick",value:function(e){document.getElementById("waitingUploadInput").click()}},{key:"render",value:function(){var e=this;return c.a.createElement(D,null,c.a.createElement(U,{isShow:this.state.isLoading}),c.a.createElement("div",{className:"perfomanceList"},c.a.createElement("div",{className:"header"},c.a.createElement("p",null,"\u0412\u0438\u0441\u0442\u0430\u0432\u0438"),c.a.createElement(I.a,{to:"/streamer/performance/new"},c.a.createElement("button",{className:"addButton"},c.a.createElement("div",{className:"addImage"}),"\u0414\u043e\u0434\u0430\u0442\u0438 \u0432\u0438\u0441\u0442\u0430\u0432\u0443"))),c.a.createElement(ne,{buttonLabel:"\u041a\u0435\u0440\u0443\u0432\u0430\u0442\u0438 \u043c\u043e\u0432\u0430\u043c\u0438 \u0434\u0443\u0431\u043b\u044f\u0436\u0443"}),c.a.createElement("input",{className:"choose-audio-btn",id:"waitingUploadInput",type:"file",accept:"audio/*",onChange:this.onChange}),c.a.createElement(R.a,{onClick:this.handleUploadClick,id:"waitingUpload",color:"primary",className:"languageButton"},"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0430\u0443\u0434\u0456\u043e \u0434\u043b\u044f \u043e\u0447\u0456\u043a\u0443\u0432\u0430\u043d\u043d\u044f \u0442\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0456\u0457"),this.state.performances.map(function(t){return c.a.createElement(ae,{deleteMethod:e.removePerformance,index:t.id,key:t.id,title:t.title,description:t.description})})))}},{key:"componentDidMount",value:function(){var e=Object(w.a)(j.a.mark(function e(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPerformances();case 2:this.setState({isLoading:!1}),this.props.onChangeCurrentTabId(0);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){console.log("[Performance List]: Component will unmount")}}]),t}(r.Component)),ce=Object(s.b)(null,function(e){return{onChangeCurrentTabId:function(t){return e(W(t))}}})(re),ie=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return c.a.createElement(v.a,null,c.a.createElement(x.a,{exact:!0,path:"/",render:function(){return c.a.createElement(C.a,{to:"/streamer/performance"})}}),c.a.createElement(x.a,{exact:!0,path:"/streamer/performance",component:ce}),c.a.createElement(x.a,{path:"/streamer/performance/:number",component:X}))}}]),t}(r.Component),oe=n(25),se=n(34),ue=n.n(se),le=function(e,t){return function(n){function a(){return Object(h.a)(this,a),Object(m.a)(this,Object(g.a)(a).apply(this,arguments))}return Object(b.a)(a,n),Object(f.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:t},c.a.createElement(e,this.props))}}]),a}(r.Component)},pe=n(35),de=n.n(pe),he=le(function(e){var t=function(e){return e<10?"0".concat(e):e.toString()},n=["fas",de.a.icon,"fa-play-circle"];return e.isPlaying?(n.pop(),n.push("fa-pause-circle")):(n.pop(),n.push("fa-play-circle")),e.connectingStatus||n.push(de.a.disable),c.a.createElement(D,null,c.a.createElement("i",{className:n.join(" "),onClick:function(){e.playByIdHandler(e.currentAudioId)}}),c.a.createElement("span",null,e.text),c.a.createElement("span",{className:de.a.time},function(e){var n=Math.floor(e/60),a=e%60;return"".concat(t(n),":").concat(t(a))}(e.duration)))},de.a.audio),fe=n(70),me=le(function(e){return e.audios.map(function(t,n){return c.a.createElement(he,{key:n,text:t.text,duration:t.duration,currentAudioId:t.id,isPlaying:!(e.currentAudioId!==t.id||!e.isPlaying),playByIdHandler:e.playByIdHandler,connectingStatus:e.connectingStatus})})},n.n(fe).a.audios),ge=n(105),be=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e={":hover":Object(F.a)({},this.props.hover),backgroundColor:this.props.backgroundColor,borderRadius:this.props.borderRadius,fontSize:this.props.fontSize,height:this.props.height,transition:"all "+this.props.transitionDuration,width:this.props.width};return c.a.createElement("button",{style:e,className:this.props.className,onClick:this.props.clicked},this.props.children,c.a.createElement("span",null,this.props.text))}}]),t}(c.a.Component),ve=Object(ge.a)(be),xe=n(42),ke=n.n(xe),ye=le(function(e){var t={backgroundColor:"#0057c6",borderRadius:"25px",className:ke.a.btn,fontSize:"18px",height:"45px",hover:{backgroundColor:"#083d81",cursor:"pointer"},text:"\u041f\u0440\u0438\u0454\u0434\u043d\u0430\u0442\u0438\u0441\u044c \u0434\u043e \u0441\u0435\u0440\u0432\u0435\u0440\u0430",transitionDuration:"0.3s",width:"auto"},n=c.a.createElement("i",{className:"fas fa-play-circle"});return e.connectingStatus&&(t.backgroundColor="#da4453",t.text="\u0412\u0456\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u0438\u0441\u044c \u0432\u0456\u0434 \u0441\u0435\u0440\u0432\u0435\u0440\u0430!",t.hover.backgroundColor="#cf1225",n=c.a.createElement("i",{className:"fas fa-stop-circle"})),c.a.createElement(D,null,c.a.createElement("span",{className:ke.a.title},e.name),c.a.createElement(ve,Object.assign({},t,{clicked:e.clicked}),n))},ke.a.streamHead);!function(e){e.Ctrl="Control",e.ArrowRight="ArrowRight",e.ArrowLeft="ArrowLeft",e.Space=" ",e.Tab="Tab"}(z||(z={}));var Ee=new function e(){var t=this;Object(h.a)(this,e),this.currentTime=void 0,this.maxDuration=void 0,this.isPause=void 0,this.timerId=void 0,this.play=function(e,n,a){t.timerId||(t.isPause=!1,t.maxDuration=a,t.timerId=setInterval(function(){!t.isPause&&t.currentTime<t.maxDuration?(t.currentTime++,e(t.currentTime)):t.currentTime>=t.maxDuration&&n()},1e3))},this.pause=function(){t.timerId&&(t.isPause=!0)},this.continue=function(){t.timerId&&(t.isPause=!1)},this.reset=function(e){t.timerId&&(t.isPause=!0,t.currentTime=0,e(t.currentTime),clearInterval(t.timerId),t.timerId=0)},this.currentTime=0,this.maxDuration=0,this.isPause=!0,this.timerId=0},Oe=n(99),Ce=n.n(Oe),Se=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(m.a)(this,Object(g.a)(t).call(this,e))).apiManager=new L,n.map=Object(oe.a)({},z.Space,!1),n.repeat=!0,n.changeConnectingStatus=function(){var e=Object(w.a)(j.a.mark(function e(t){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),void 0===n.props.speeches){e.next=14;break}if(n.props.connectingStatus){e.next=7;break}return e.next=5,pt.connectToHub().then(Object(w.a)(j.a.mark(function e(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pt.sendCommand("Start").then(function(){return n.props.onChangeConnectingStatus(!0)}).catch(function(){return alert("\u0412\u0438\u043d\u0438\u043a\u043b\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0456!")});case 2:case"end":return e.stop()}},e,this)}))).catch(function(){return alert("\u0412\u0438\u043d\u0438\u043a\u043b\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0456!")});case 5:e.next=12;break;case 7:if(!n.props.isPlaying){e.next=10;break}return e.next=10,n.pause();case 10:return e.next=12,pt.sendCommand("End").then(Object(w.a)(j.a.mark(function e(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pt.disconnectFromHub().then(function(){n.props.onChangeConnectingStatus(!1),void 0!==n.props.speeches&&0!==n.props.speeches.length&&n.props.onSaveCurrentSpeechId(n.props.speeches[0].id)}).catch(function(){return alert("\u0412\u0438\u043d\u0438\u043a\u043b\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0456. \u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u0438\u0442\u0438 \u0437'\u0454\u0434\u043d\u0430\u043d\u043d\u044f!")});case 2:case"end":return e.stop()}},e,this)}))).catch(function(){return alert("\u0412\u0438\u043d\u0438\u043a\u043b\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0456. \u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u0438\u0442\u0438 \u0437'\u0454\u0434\u043d\u0430\u043d\u043d\u044f!")});case 12:e.next=15;break;case 14:alert("\u0417\u0434\u0430\u0454\u0442\u044c\u0441\u044f \u0446\u044f \u0432\u0438\u0441\u0442\u0430\u0432\u0430 \u043d\u0435 \u043c\u0456\u0441\u0442\u0438\u0442\u044c \u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u0456\u0432 \u0434\u043b\u044f \u043f\u0440\u043e\u0433\u0440\u0430\u0432\u0430\u043d\u043d\u044f...");case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.playByIdHandler=function(){var e=Object(w.a)(j.a.mark(function e(t){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.props.connectingStatus){e.next=13;break}if(!(n.state.isFirst||n.props.isPlaying&&t!==n.props.currentSpeechId)){e.next=6;break}return e.next=4,pt.sendCommand(n.props.performanceId+"_"+t).then(function(){n.props.onSaveCurrentSpeechId(t),n.props.onChangeStreamingStatus(!0),Ee.reset(n.props.onChangeCurrentPlaybackTime),Ee.play(n.props.onChangeCurrentPlaybackTime,n.pause.bind(Object(A.a)(Object(A.a)(n))),n.props.maxDuration),n.state.isFirst&&n.setState({isFirst:!1})}).catch(function(){return alert("\u0412\u0438\u043d\u0438\u043a\u043b\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0456. \u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u0438\u0442\u0438 \u0437'\u0454\u0434\u043d\u0430\u043d\u043d\u044f!")});case 4:e.next=13;break;case 6:if(n.props.isPlaying){e.next=11;break}return e.next=9,pt.sendCommand(n.props.performanceId+"_"+t).then(function(){n.props.onSaveCurrentSpeechId(t),n.props.onChangeStreamingStatus(!0),Ee.play(n.props.onChangeCurrentPlaybackTime,n.pause.bind(Object(A.a)(Object(A.a)(n))),n.props.maxDuration)}).catch(function(){return alert("\u0412\u0438\u043d\u0438\u043a\u043b\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0456. \u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u0438\u0442\u0438 \u0437'\u0454\u0434\u043d\u0430\u043d\u043d\u044f!")});case 9:e.next=13;break;case 11:return e.next=13,n.pause();case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.pause=Object(w.a)(j.a.mark(function e(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pt.sendCommand("Pause").then(function(){n.props.onChangeStreamingStatus(!1),Ee.reset(n.props.onChangeCurrentPlaybackTime)}).catch(function(){return alert("\u0412\u0438\u043d\u0438\u043a\u043b\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0456. \u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u0438\u0442\u0438 \u0437'\u0454\u0434\u043d\u0430\u043d\u043d\u044f!")});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),n.playPauseHandler=function(){var e=Object(w.a)(j.a.mark(function e(t){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.props.connectingStatus){e.next=11;break}if(t.preventDefault(),n.props.isPlaying){e.next=9;break}return e.next=5,pt.sendCommand(n.props.performanceId+"_"+n.props.currentSpeechId);case 5:n.props.onChangeStreamingStatus(!0),Ee.play(n.props.onChangeCurrentPlaybackTime,n.pause.bind(Object(A.a)(Object(A.a)(n))),n.props.maxDuration),e.next=11;break;case 9:return e.next=11,n.pause();case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.checkKeys=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];for(var r=0;r<t.length;r++){var c=t[r];if(!n.map[c])return!1}return!0},n.onKeyDownUpHandler=function(){var e=Object(w.a)(j.a.mark(function e(t){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.map[t.key]="keydown"===t.type,!n.checkKeys(z.Space)||!n.repeat){e.next=7;break}return e.next=4,n.playPauseHandler(t);case 4:n.repeat=!1,e.next=8;break;case 7:"keyup"===t.type&&(n.repeat=!0);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleError=function(e){500===e.status?alert("\u0412\u0438\u043d\u0438\u043a\u043b\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0456."):alert("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u0456\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u0438\u0441\u044c \u0434\u043e \u0441\u0435\u0440\u0432\u0435\u0440\u0443. \u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0442\u0435 \u0437'\u0454\u0434\u043d\u0430\u043d\u043d\u044f \u0437 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c!")},n.state={isFirst:!0,isWarning:!1,perfomanceId:n.props.match.params.number,performanceName:"",isLoading:!0},n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement(D,null,c.a.createElement(U,{isShow:this.state.isLoading}),c.a.createElement(ye,{name:this.state.performanceName,connectingStatus:this.props.connectingStatus,clicked:function(t){return e.changeConnectingStatus(t)}}),c.a.createElement(me,{audios:void 0!==this.props.speeches?this.props.speeches:[],connectingStatus:this.props.connectingStatus,currentAudioId:this.props.currentSpeechId,playByIdHandler:this.playByIdHandler,isPlaying:this.props.isPlaying}),c.a.createElement(ue.a,{onKey:function(t){return e.onKeyDownUpHandler(t)},type:"keydown"}),c.a.createElement(ue.a,{onKey:function(t){return e.onKeyDownUpHandler(t)},type:"keyup"}))}},{key:"componentDidMount",value:function(){var e=Object(w.a)(j.a.mark(function e(){var t,n,a,r,c=this;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiManager.getPerformanceById(this.state.perfomanceId);case 2:if(200!==(t=e.sent).status){e.next=22;break}return e.next=6,t.json();case 6:return n=e.sent,this.setState({performanceName:n.title}),this.props.onSavePerformanceId(this.state.perfomanceId),e.next=11,this.apiManager.getSpeechInfo(this.state.perfomanceId);case 11:if(200!==(a=e.sent).status){e.next=19;break}return e.next=15,a.json();case 15:r=e.sent,this.props.onSaveSpeeches(r),e.next=20;break;case 19:this.handleError(a);case 20:e.next=23;break;case 22:this.handleError(t);case 23:this.setState({isLoading:!1}),this.props.onChangeCurrentTabId(1),window.onbeforeunload=function(e){return!c.props.connectingStatus&&null};case 26:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(w.a)(j.a.mark(function e(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.connectingStatus){e.next=8;break}if(!this.props.isPlaying){e.next=4;break}return e.next=4,this.pause();case 4:return e.next=6,pt.sendCommand("End").catch(function(e){return console.log(e)});case 6:return e.next=8,pt.disconnectFromHub().catch(function(e){return console.log(e)});case 8:this.props.onChangeStreamStateToInitial(),window.onbeforeunload=null;case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}(r.Component),je=Object(s.b)(function(e){return{connectingStatus:e.stream.connectingStatus,currentSpeechId:e.stream.currentSpeechId,isPlaying:e.stream.isPlaying,maxDuration:e.stream.maxDuration,performanceId:e.stream.performanceId,speeches:e.stream.speeches}},function(e){return{onChangeConnectingStatus:function(t){return e(function(e){return{payload:{status:e},type:"CHANGE_CONNECTING_STATUS"}}(t))},onChangeCurrentPlaybackTime:function(t){return e(Y(t))},onChangeStreamStateToInitial:function(){return e({type:"CHANGE_STREAM_STATE_TO_INITIAL"})},onChangeStreamingStatus:function(t){return e(K(t))},onSaveSpeeches:function(t){return e({payload:{speeches:t},type:"LOAD_SPEECHES"})},onSaveCurrentSpeechId:function(t){return e(G(t))},onSavePerformanceId:function(t){return e(function(e){return{payload:{id:e},type:"SAVE_PERFORMANCE_ID"}}(t))},onChangeCurrentTabId:function(t){return e(W(t))}}})(le(Se,Ce.a.stream)),we=(n(171),n(173),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return c.a.createElement("button",{className:"header-logo"},this.props.text)}}]),t}(c.a.PureComponent)),Ae=(n(175),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"logout"})}}]),t}(c.a.PureComponent)),Ie=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(m.a)(this,Object(g.a)(t).call(this,e))).state={isAuthorized:!1},n}return Object(b.a)(t,e),Object(f.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=location.pathname.split("/"),a=Object(F.a)({},t);return"login"===n[1]?a.isAuthorized=!1:a.isAuthorized=!0,a}}]),Object(f.a)(t,[{key:"render",value:function(){var e=this.state.isAuthorized?c.a.createElement(Ae,null):null;return c.a.createElement("header",{id:"header"},c.a.createElement(we,{text:"\u0422\u0435\u0430\u0442\u0440 \u043b\u044f\u043b\u044c\u043e\u043a"}),e)}}]),t}(c.a.Component),Ne=n(198),Te=n(22),Le=n.n(Te),_e=le(function(e){var t=[Le.a.act,Le.a.play],n=["fas","fa-play"];!0===e.isPlaying&&(t.pop(),t.push(Le.a.pause),n.pop(),n.push("fa-pause"));var a=[Le.a.prev],r=[Le.a.next];return e.connectingStatus||(t.push(Le.a.disable),a.push(Le.a.prevNextDisable),r.push(Le.a.prevNextDisable)),c.a.createElement(D,null,c.a.createElement("a",{href:"",className:a.join(" "),onClick:function(t){return e.prevSpeechHandler(t)}},c.a.createElement("i",{className:"fas fa-fast-backward"})),c.a.createElement("a",{href:"",className:t.join(" "),onClick:function(t){return e.playPauseHandler(t)}},c.a.createElement("i",{className:n.join(" ")})),c.a.createElement("a",{href:"",className:r.join(" "),onClick:function(t){return e.nextSpeechHandler(t)}},c.a.createElement("i",{className:"fas fa-fast-forward"})))},Le.a.btnSection),Pe=n(36),De=n.n(Pe),He=le(function(e){var t=function(e){return e<10?"0".concat(e):e.toString()},n=function(e){var n=Math.floor(e/60),a=e%60;return"".concat(t(n),":").concat(t(a))};return c.a.createElement(D,null,c.a.createElement("span",{className:De.a.numAudio},"#",t(e.numAudio)),c.a.createElement("span",{className:De.a.playbackTime},n(e.currentTime)," / ",n(e.totalTime)),c.a.createElement("input",{type:"range",className:De.a.playbackScale,value:e.currentTime,max:e.totalTime,onChange:void 0}))},De.a.playSection),Be=n(100),Ue=n.n(Be),Fe=function(e){function t(e){var n,a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(g.a)(t).call(this,e))).apiManager=new L,a.map=(n={},Object(oe.a)(n,z.Ctrl,!1),Object(oe.a)(n,z.ArrowRight,!1),Object(oe.a)(n,z.ArrowLeft,!1),n),a.repeat=!0,a.timerId=0,a.playPauseHandler=function(){var e=Object(w.a)(j.a.mark(function e(t){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!a.props.connectingStatus){e.next=12;break}if(a.props.isPlaying){e.next=9;break}return e.next=5,pt.sendCommand(a.props.performanceId+"_"+a.props.currentSpeechId);case 5:a.props.onChangeStreamingStatus(!0),Ee.play(a.props.onChangeCurrentPlaybackTime,a.pause.bind(Object(A.a)(Object(A.a)(a))),a.props.maxDuration),e.next=12;break;case 9:if(!a.props.isPlaying){e.next=12;break}return e.next=12,a.pause();case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.pause=Object(w.a)(j.a.mark(function e(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pt.sendCommand("Pause").then(function(){a.props.onChangeStreamingStatus(!1),Ee.reset(a.props.onChangeCurrentPlaybackTime)}).catch(function(e){return console.log(e)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),a.nextSpeechHandler=function(){var e=Object(w.a)(j.a.mark(function e(t){var n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!a.props.connectingStatus){e.next=10;break}if(a.props.currentSpeechIndex===a.props.speeches.length-1){e.next=10;break}if(n=a.props.speeches[a.props.currentSpeechIndex+1].id,a.props.onChangeCurrentSpeechId(n),Ee.reset(a.props.onChangeCurrentPlaybackTime),!a.props.isPlaying){e.next=10;break}return e.next=9,pt.sendCommand(a.props.performanceId+"_"+n);case 9:Ee.play(a.props.onChangeCurrentPlaybackTime,a.pause.bind(Object(A.a)(Object(A.a)(a))),a.props.maxDuration);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.prevSpeechHandler=function(){var e=Object(w.a)(j.a.mark(function e(t){var n;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!a.props.connectingStatus){e.next=10;break}if(0===a.props.currentSpeechIndex){e.next=10;break}if(n=a.props.speeches[a.props.currentSpeechIndex-1].id,a.props.onChangeCurrentSpeechId(n),Ee.reset(a.props.onChangeCurrentPlaybackTime),!a.props.isPlaying){e.next=10;break}return e.next=9,pt.sendCommand(a.props.performanceId+"_"+n);case 9:Ee.play(a.props.onChangeCurrentPlaybackTime,a.pause.bind(Object(A.a)(Object(A.a)(a))),a.props.maxDuration);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.checkKeys=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++){var c=t[r];if(!a.map[c])return!1}return!0},a.onKeyDownUpHandler=function(){var e=Object(w.a)(j.a.mark(function e(t){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.map[t.key]="keydown"===t.type,!a.checkKeys(z.Ctrl,z.ArrowRight)||!a.repeat){e.next=7;break}return a.repeat=!1,e.next=5,a.nextSpeechHandler(t);case 5:e.next=14;break;case 7:if(!a.checkKeys(z.Ctrl,z.ArrowLeft)||!a.repeat){e.next=13;break}return a.repeat=!1,e.next=11,a.prevSpeechHandler(t);case 11:e.next=14;break;case 13:"keyup"===t.type&&(a.repeat=!0);case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={currentTime:0,performanceId:a.props.performanceId},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement(D,null,c.a.createElement(_e,{playPauseHandler:this.playPauseHandler,nextSpeechHandler:this.nextSpeechHandler,prevSpeechHandler:this.prevSpeechHandler,connectingStatus:this.props.connectingStatus,isPlaying:this.props.isPlaying}),c.a.createElement(He,{numAudio:this.props.currentSpeechIndex+1,totalTime:this.props.maxDuration,currentTime:this.props.currentPlaybackTime}),c.a.createElement(ue.a,{onKey:function(t){return e.onKeyDownUpHandler(t)},type:"keydown"}),c.a.createElement(ue.a,{onKey:function(t){return e.onKeyDownUpHandler(t)},type:"keyup"}))}}]),t}(r.Component),Me=Object(s.b)(function(e){return{connectingStatus:e.stream.connectingStatus,currentPlaybackTime:e.stream.currentPlaybackTime,currentSpeechId:e.stream.currentSpeechId,currentSpeechIndex:e.stream.currentSpeechIndex,isPlaying:e.stream.isPlaying,maxDuration:e.stream.maxDuration,speeches:e.stream.speeches}},function(e){return{onChangeCurrentPlaybackTime:function(t){return e(Y(t))},onChangeCurrentSpeechId:function(t){return e(G(t))},onChangeStreamingStatus:function(t){return e(K(t))}}})(le(Fe,Ue.a.actionSection)),Re=n(195),Ge=n(52),Ke=n.n(Ge),Ye=function(e){function t(e){return Object(h.a)(this,t),Object(m.a)(this,Object(g.a)(t).call(this,e))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return c.a.createElement(Re.a,{to:this.props.path,className:Ke.a.NavItem,activeClassName:Ke.a.NavItemActive,onClick:this.props.clicked},c.a.createElement("img",{src:this.props.imgSrc,alt:""}),c.a.createElement("span",null,this.props.name))}}]),t}(c.a.Component),We=n(101),Ve=n.n(We),qe=n(102),Qe=n.n(qe);n(181);function ze(){return c.a.createElement("div",{className:"countBlock"},c.a.createElement("p",null,"\u041f\u0456\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043e \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456\u0432: ",c.a.createElement("span",{id:"userCounter"},"0")))}var Je=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(m.a)(this,Object(g.a)(t).call(this,e))).OnPerformanceClickHandler=function(){var e=Object(w.a)(j.a.mark(function e(t,a){var r,c,i,o,s,u,l;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==a||!n.props.isStreamConnectedToServer){e.next=5;break}confirm("\u0421\u0442\u043e\u0440\u0456\u043d\u043a\u0430 \u0432\u0441\u0435 \u0449\u0435 \u043f\u0456\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0430 \u0434\u043e \u0441\u0435\u0440\u0432\u0435\u0440\u0443. \u0412\u0438 \u0441\u043f\u0440\u0430\u0432\u0434\u0456 \u0445\u043e\u0447\u0435\u0442\u0435 \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0456\u043d\u0448\u0443 \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0443")||t.preventDefault(),e.next=36;break;case 5:if(0!==a||!n.props.isNewFilesLoaded){e.next=36;break}if(confirm("\u0424\u0430\u0439\u043b\u0438 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u0456 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440, \u0430\u043b\u0435 \u0432\u0441\u0435 \u0449\u0435 \u043d\u0435 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u0456. \u0412\u0438 \u0441\u043f\u0440\u0430\u0432\u0434\u0456 \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0456\u043d\u0448\u0443 \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0443 \u0442\u0430 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0444\u0430\u0439\u043b\u0438?")){e.next=11;break}t.preventDefault(),e.next=36;break;case 11:if(!(n.props.newFilesName.length>0)){e.next=35;break}for(r="?",c=!0,i=!1,o=void 0,e.prev=16,s=n.props.newFilesName[Symbol.iterator]();!(c=(u=s.next()).done);c=!0)l=u.value,r+="files=".concat(l,"&");e.next=24;break;case 20:e.prev=20,e.t0=e.catch(16),i=!0,o=e.t0;case 24:e.prev=24,e.prev=25,c||null==s.return||s.return();case 27:if(e.prev=27,!i){e.next=30;break}throw o;case 30:return e.finish(27);case 31:return e.finish(24);case 32:return r.slice(r.length-1,1),e.next=35,q.delete("/audio/unload/"+r);case 35:n.props.onChangeAudioUploadToInitial();case 36:case"end":return e.stop()}},e,this,[[16,20,24,32],[25,,27,31]])}));return function(t,n){return e.apply(this,arguments)}}(),n.onStreamClickHandler=function(e){e.preventDefault()},n.state={isVisible:!0,performanceId:-1},n}return Object(b.a)(t,e),Object(f.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=Object(F.a)({},t),a=location.pathname.split("/");return"login"===a[2]?n.isVisible=!1:"stream"===a[2]&&(n.performanceId=parseInt(a[3],void 0)),"stream"!==a[2]&&-1!==n.performanceId&&(n.performanceId=-1),n}}]),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=null,n=null;return-1!==this.state.performanceId&&(t=c.a.createElement(Me,{performanceId:this.state.performanceId}),n=c.a.createElement(ze,null)),this.state.isVisible?c.a.createElement("div",{className:"sidebar"},c.a.createElement("nav",{className:"nav"},c.a.createElement(Ye,{id:0,name:"\u0412\u0438\u0441\u0442\u0430\u0432\u0438",imgSrc:Ve.a,path:"/streamer/performance",clicked:function(t){return e.OnPerformanceClickHandler(t,e.props.currentTabId)}}),c.a.createElement(Ye,{id:1,name:"\u0422\u0440\u0430\u043d\u0441\u043b\u044f\u0446\u0456\u0457",imgSrc:Qe.a,path:"/streamer/stream",clicked:function(t){return e.onStreamClickHandler(t)}})),t,n):null}}]),t}(c.a.Component),Ze=Object(Ne.a)(Object(s.b)(function(e){return{isStreamConnectedToServer:e.stream.connectingStatus,currentTabId:e.sidebar.currentTabId,isNewFilesLoaded:e.audioUpload.isNewFilesLoaded,newFilesName:e.audioUpload.newFilesName}},function(e){return{onChangeCurrentTabId:function(t){return e(W(t))},onChangeAudioUploadToInitial:function(){return e({type:"CHANGE_TO_AUDIO_UPLOAD_INITIAL_STATE",payload:{}})}}})(Je)),Xe=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return c.a.createElement(D,null,c.a.createElement(Ie,null),c.a.createElement("main",null,c.a.createElement(Ze,null),c.a.createElement(v.a,null,c.a.createElement(x.a,{path:"/streamer/login",component:O}),c.a.createElement(x.a,{exact:!0,path:"/streamer/",component:ie}),c.a.createElement(x.a,{path:"/streamer/performance",component:ie}),c.a.createElement(x.a,{exact:!0,path:"/streamer/stream/:number",component:je}))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $e={isNewFilesLoaded:!1,newFilesName:[]},et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0,n=Object(F.a)({},e);switch(t.type){case"CHANGE_IS_NEW_FILES_LOADED":n.isNewFilesLoaded=t.payload.nextValue;break;case"ADD_NEW_FILES_NAME":n.newFilesName.push(t.payload.filename);break;case"DELETE_NEW_FILES_NAME":var a=n.newFilesName.filter(function(e){return!t.payload.filenames.includes(e)});n.newFilesName=a,n.isNewFilesLoaded=a.length>0;break;case"CHANGE_TO_AUDIO_UPLOAD_INITIAL_STATE":n.isNewFilesLoaded=!1,n.newFilesName=[]}return n},tt={currentTabId:0},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0,n=Object(F.a)({},e);switch(t.type){case"CHANGE_CURRENT_TAB_ID":n.currentTabId=t.payload.nextId}return n},at={connectingStatus:!1,currentPlaybackTime:0,currentSpeechId:-1,currentSpeechIndex:-1,isPlaying:!1,maxDuration:0,performanceId:-1,speeches:void 0},rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0,n=Object(F.a)({},e);switch(t.type){case"SAVE_PERFORMANCE_ID":n.performanceId=t.payload.id;break;case"LOAD_SPEECHES":0!==t.payload.speeches.length&&(n.speeches=t.payload.speeches.sort(function(e,t){return e.order>t.order?1:-1}),n.currentSpeechId=t.payload.speeches[0].id,n.currentSpeechIndex=0,n.maxDuration=t.payload.speeches[0].duration);break;case"SAVE_CURRENT_SPEECH_ID":n.currentSpeechId=t.payload.currentSpeechId,n.currentSpeechIndex=void 0!==e.speeches?e.speeches.findIndex(function(e){return e.id===t.payload.currentSpeechId}):-1;var a=void 0!==e.speeches?e.speeches.find(function(e){return e.id===t.payload.currentSpeechId}):void 0;n.maxDuration=void 0!==a?a.duration:0;break;case"CHANGE_ISPLAYING_STATUS":n.isPlaying=t.payload.isPlaying;break;case"CHANGE_CURRENT_PLAYBACK_TIME":n.currentPlaybackTime=t.payload.currentPlaybackTime;break;case"CHANGE_STREAM_STATE_TO_INITIAL":n=at;break;case"CHANGE_CONNECTING_STATUS":n.connectingStatus=t.payload.status}return n},ct=(n(183),n(185),n(187),{urlApi:"/"}),it=n(106),ot=function(){function e(){Object(h.a)(this,e),this.connection=void 0;var t=T.a.get("urlApi");this.connection=(new it.a).withUrl("".concat(t,"StreamHub")).build(),this.connection.on("updateCount",function(e){document.getElementById("userCounter").innerHTML=e})}return Object(f.a)(e,[{key:"connectToHub",value:function(){var e=Object(w.a)(j.a.mark(function e(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Try to connect to SignalR Hub"),e.next=3,this.connection.start();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"disconnectFromHub",value:function(){var e=Object(w.a)(j.a.mark(function e(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Try to disconnect from SignalR Hub"),e.next=3,this.connection.stop();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"sendCommand",value:function(){var e=Object(w.a)(j.a.mark(function e(t){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Try send to SignalR Hub:"+t),e.next=3,this.connection.send("SendMessage",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();n.d(t,"signalRManager",function(){return pt});var st=Object(l.combineReducers)({stream:rt,sidebar:nt,audioUpload:et}),ut=Object(l.createStore)(st,Object(p.composeWithDevTools)(Object(l.applyMiddleware)(d.a)));T.a.set(ct);var lt=c.a.createElement(s.a,{store:ut},c.a.createElement(u.a,{history:P},c.a.createElement(Xe,null))),pt=new ot;o.a.render(lt,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},22:function(e,t,n){e.exports={btnSection:"ButtonSection_btnSection__WkHkX",prev:"ButtonSection_prev__3R_4A",next:"ButtonSection_next__BEJ9w",prevNextDisable:"ButtonSection_prevNextDisable__3ToCt",act:"ButtonSection_act__TzfjJ",disable:"ButtonSection_disable__3TKz_",play:"ButtonSection_play__60ThG",pause:"ButtonSection_pause__3MWYN"}},35:function(e,t,n){e.exports={audio:"StreamAudio_audio__Hh9b8",icon:"StreamAudio_icon__1Kta5",disable:"StreamAudio_disable__2hEND",time:"StreamAudio_time__3e1DB"}},36:function(e,t,n){e.exports={playSection:"PlaySection_playSection__3ctl-",numAudio:"PlaySection_numAudio__XyeRj",playbackTime:"PlaySection_playbackTime__sVffU",playbackScale:"PlaySection_playbackScale__17yyt"}},42:function(e,t,n){e.exports={streamHead:"StreamHead_streamHead__2JdVk",title:"StreamHead_title__2Erdy",btn:"StreamHead_btn__25jjZ"}},48:function(e,t,n){e.exports={Backdrop:"Spinner_Backdrop__B3Xqc",Spinner:"Spinner_Spinner__bgivY",load6:"Spinner_load6__3Cp0a",round:"Spinner_round__3FE99"}},52:function(e,t,n){e.exports={NavItem:"SidebarItem_NavItem__277V1",NavItemActive:"SidebarItem_NavItemActive__1qvYN","nav-item":"SidebarItem_nav-item__2Qq2y"}},59:function(e,t,n){},67:function(e,t,n){e.exports=n.p+"static/media/theater-logo.8b68e78f.png"},70:function(e,t,n){e.exports={audios:"StreamAudios_audios__3D7M3"}},99:function(e,t,n){e.exports={stream:"Stream_stream__XT1t6"}}},[[107,2,1]]]);
//# sourceMappingURL=main.b848fe42.chunk.js.map